<Window x:Class="OnlineShoeStoreWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OnlineShoeStoreWpf"
        mc:Ignorable="d"
        Title="Каталог обуви" Height="800" Width="1500"
        FontFamily="Times New Roman" FontSize="14"
        Background="White">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>
    <ScrollViewer Grid.Row="0" Grid.RowSpan="3" VerticalScrollBarVisibility="Auto" Padding="20">
        <StackPanel>
            <StackPanel Orientation="Horizontal" Margin="10" HorizontalAlignment="Center">
                <TextBlock Text="Поиск по описанию:" Margin="5" VerticalAlignment="Center"/>
                <TextBox Width="150" Text="{Binding SearchDescription, UpdateSourceTrigger=PropertyChanged}" Margin="5" />
                <TextBlock Text="Производитель:" Margin="5" VerticalAlignment="Center"/>
                <ComboBox Width="150" ItemsSource="{Binding Manufacturers}" SelectedItem="{Binding SelectedManufacturer}" DisplayMemberPath="Name" Margin="5" />
                <TextBlock Text="Цена не более:" Margin="5" VerticalAlignment="Center"/>
                <TextBox Width="100" Text="{Binding MaxPrice, UpdateSourceTrigger=PropertyChanged}" Margin="5" />
                <CheckBox Content="Только со скидкой" IsChecked="{Binding OnlyDiscount}" Margin="5" VerticalAlignment="Center"/>
                <CheckBox Content="Только в наличии" IsChecked="{Binding OnlyInStock}" Margin="5" VerticalAlignment="Center"/>
                <TextBlock Text="Сортировка:" Margin="5" VerticalAlignment="Center"/>
                <ComboBox Width="150"
                    SelectedValue="{Binding SortOrder}"
                    SelectedValuePath="Tag">  
                    <ComboBoxItem Content="По артикулу" Tag="article_asc" />
                    <ComboBoxItem Content="По поставщику" Tag="supplier_asc" />
                    <ComboBoxItem Content="По цене (возр.)" Tag="price_asc" />
                    <ComboBoxItem Content="По цене (убыв.)" Tag="price_desc" />
                </ComboBox>

                <Button Content="Применить" Background="#00FA9A" FontWeight="Bold" Click="ApplyFilter_Click" Margin="10,5" Padding="20,8"/>
            </StackPanel>

            <ListBox ItemsSource="{Binding Products}" SelectedItem="{Binding SelectedProduct}" BorderThickness="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="Black" BorderThickness="1" Margin="50,20" Padding="20" Background="White">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" BorderBrush="Black" BorderThickness="1" Margin="0,0,20,0">
                                    <Grid>
                                        <TextBlock Text="Фото" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Gray"/>
                                        <Image Source="{Binding PhotoName, StringFormat=/images/shoes/{0}}" Stretch="Uniform"/>
                                    </Grid>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="15,0,0,0">
                                    <TextBlock FontWeight="Bold" FontSize="16" Margin="0,0,0,10">
                                        <Run Text="Категория товара: "/>
                                        <Run Text="{Binding Category.Name}"/>
                                        <Run Text=" | "/>
                                        <Run Text="{Binding CategoryId, StringFormat=Категория ID: {0}}"/>      
                                    </TextBlock>
                                    <TextBlock Text="{Binding Description, StringFormat='Описание товара: {0}'}" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Manufacturer.Name, StringFormat='Производитель: {0}'}" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Supplier.Name, StringFormat='Поставщик: {0}'}" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Price, StringFormat='Цена: {0}'}" Margin="0,0,0,8"/>
                                    <TextBlock Text="Единица измерения: шт." Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Quantity, StringFormat='Количество на складе: {0}'}" />
                                </StackPanel>

                                <Border Grid.Column="2" Background="#00FA9A" Padding="15,8" CornerRadius="10"
                                    Visibility="{Binding HasDiscount, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBlock Text="{Binding Discount, StringFormat='Действующая скидка {0}%'}" 
                                        Foreground="White" FontWeight="Bold" TextAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10"
                    Visibility="{Binding IsAdminOrManager, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Button Content="Добавление" Click="AddProduct_Click" Margin="5" Padding="15,8"/>
                <Button Content="Редактирование" Click="EditProduct_Click" Margin="5" Padding="15,8"/>
                <Button Content="Удаление" Click="DeleteProduct_Click" Margin="5" Padding="15,8"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Window>